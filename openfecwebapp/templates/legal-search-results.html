{% extends "layouts/main.html" %}
{% import 'macros/legal-search.html' as legal_search %}

{% block title %}
  Search results for &ldquo;{{query}}&rdquo;
{% endblock %}

{% block body %}
<header class="page-header slab slab--primary">
  <span class="page-header__title">Search results</span>
  {{ legal_search.search('header', result_type, query) }}
</header>

<div class="main">
  <div class="container">
    <div class="row">
      <div class="sidebar-container sidebar-container--left">
        <nav class="sidebar sidebar--neutral side-nav js-sticky" data-sticky-container="main">
          <ul class="sidebar__content">
            <li class="side-nav__item">
              <a class="side-nav__link" href="#results-regulations">
              Regulations ({{ results.total_regulations|default(0) }})
              </a>
            </li>
            <li class="side-nav__item">
              <a class="side-nav__link" href="#results-advisory-opinions">
              Advisory Opinions ({{ results.total_advisory_opinions|default(0) }})
              </a>
            </li>
            <li class="is-disabled side-nav__item"><span class="side-nav__link">Matters Under Review (TBD)</span></li>
            <li class="is-disabled side-nav__item"><span class="side-nav__link">(Resource TBD)</span></li>
            <li class="is-disabled side-nav__item"><span class="side-nav__link">(Resource TBD)</span></li>
          </ul>
        </nav>
      </div>
      <section class="main__content">
        <h1 class="main__title">Results for “{{ query }}”</h1>
        <div id="results-regulations" class="content__section">
          <div class="results-info results-info--top">
            <div class="results-info__left">
              <h2 class="results-info__title">Regulations</h2>
            </div>
            {% if results.total_regulations %}
            <div class="results-info__right">
              <span class="results-info__details">
                <a href="/legal/advisory-opinions?search={{ query }}">
                  View all <strong>{{ results.total_regulations }}</strong> results</a></span>
            </div>
            {% endif %}
          </div>
          {% if results.total_regulations %}
            <table class="data-table data-table--text">
              <thead>
                <tr>
                  <th class="cell--15">Part No.</th>
                  <th class="cell--25">Name</th>
                  <th class="cell--60">Hit</th>
                </tr>
              </thead>
              <tbody>
                {% for regulation in results.regulations %}
                  {% include 'partials/legal-search-results-regulation.html' %}
                {% endfor %}
              </tbody>
            </table>
          {% else %}
            <div class="message message--alert">
              <p>Sorry, there were no results.</p>
            </div>
          {% endif %}
        </div>

        <div id="results-advisory-opinions" class="content__section">
          <div class="results-info results-info--simple">
            <div class="results-info__left">
              <h2 class="results-info__title">Advisory Opinions</h2>
            </div>
            {% if results.total_advisory_opinions %}
            <div class="results-info__right">
              <span class="results-info__details">1&ndash;{{ results.advisory_opinions|length }} of <a href="/legal/advisory-opinions/?search={{ query }}"><strong>{{ results.total_advisory_opinions }}</strong> results</a></span>
            </div>
            {% endif %}
          </div>
          {% if results.total_advisory_opinions %}
            <table class="data-table data-table--text">
              <thead>
                <tr>
                  <th class="cell--15">No.</th>
                  <th class="cell--25">Name</th>
                  <th class="cell--60">Hit</th>
                </tr>
              </thead>
              <tbody>
                {% for advisory_opinion in results.advisory_opinions %}
                  {% include 'partials/legal-search-results-advisory-opinion.html' %}
                {% endfor %}
              </tbody>
            </table>
            <div class="results-info results-info--simple">
              <a class="button button--alt" href="/legal/advisory-opinions/?search={{ query }}">View all results</a>
            </div>
          {% else %}
            <div class="message message--alert">
              <p>Sorry, there were no results.</p>
            </div>
          {% endif %}
        </div>
      </section>
    </div>
  </div>
</div>
{% endblock %}
